<?
class frmProfessor extends MCompoundForm
{
	protected $objProfessor;
	protected $oid;
	function __construct($objProfessor)
	{
		$this->objProfessor=$objProfessor;
		parent::__construct();
		$this->SetTitle($this->professor->nome);
		$this->SetIcon($this->manager->GetUI()->GetImage('administracao','tools1.png'));
		$this->SetClose($this->manager->GetActionURL('administracao','main:professor:find'));
	}
	function CreateFields()
	{
		global $MIOLO, $page, $module, $context, $action, $history;
		Util::SetIfNull($this->oid,$this->objProfessor->idprofessor);
		parent::CreateFields();
		$ui = $this->manager->GetUI();
		$form = Form::GetFormValue('form');
		switch ($form)
		{
			case 'excluir':
			$this->_form[] = $ui->GetForm('administracao','frmProfessorDel',$this->objProfessor,'professor');
			break;
			case 'dados':
			$this->_form[] = $ui->GetForm('administracao','frmProfessorDados',$this->objProfessor,'professor');
			break;
		}
		if ($this->_form[0])
		{
			$this->_form[0]->SetClose($this->manager->GetActionURL('administracao','main:professor', $objProfessor->idprofessor));
		}
		//Panel
		$action = $this->manager->context->action;
		$this->_panel[0]=new ActionPanel('pnlCompound','Opções','',false);
		$panel=$this->_panel[0];
		$panel->SetIconType('small');
		$panel->SetTitle('Código: ' . $this->objProfessor->idprofessor);
		$panel->InsertUserAction(0,'administracao_info',A_EXECUTE,'Excluir',$ui->GetImage('administracao','del.png'),'administracao',$action, $this->oid, array("form"=>"excluir"));
		$panel->InsertUserAction(0,'administracao_info',A_EXECUTE,'Dados de Professor',$ui->GetImage('administracao','edit.png'),'administracao',$action, $this->oid, array("form"=>"dados"));
	}
}
?>

